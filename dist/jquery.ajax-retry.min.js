!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}(function(h){function e(t){this._attempts=this._attempts?this._attempts+1:1}var s;h.ajax=(s=h.ajax,function(t){return s(t).always(e)}),h.ajaxPrefilter(function(t,e,s){s.retry=function(t){return t.timeout&&(this.timeout=t.timeout),t.statusCodes&&(this.statusCodes=t.statusCodes),this.pipe(null,(r=this,f=(m=t).times,p=r.timeout,d=m.onRetry,c=m.timeout,function(t,e,s){var i=this,n=new h.Deferred,o=r.getResponseHeader("Retry-After"),a=f-1+this._attempts;function u(){var t=m.exponential?2*p:m.timeout;h.ajax(i).retry({times:f-1,exponential:m.exponential,timeout:t,statusCodes:m.statusCodes,onRetry:d}).pipe(n.resolve,n.reject)}return 1<f&&(!r.statusCodes||-1<h.inArray(t.status,r.statusCodes))?(o&&(p=isNaN(o)?new Date(o).getTime()-h.now():1e3*parseInt(o,10),(isNaN(p)||p<0)&&(p=r.timeout)),void 0!==p?(d&&d(this._attempts,a,c),setTimeout(u,p)):u()):(d&&d(this._attempts,a,null),n.rejectWith(this,arguments)),n})).done(function(){});var r,m,f,p,d,c}})});